<html xmlns="http://www.w3.org/1999/xhtml" xmlns:tal="http://xml.zope.org/namespaces/tal" xmlns:metal="http://xml.zope.org/namespaces/metal" xmlns:i18n="http://xml.zope.org/namespaces/i18n" xml:lang="en" lang="en" metal:use-macro="context/main_template/macros/master" i18n:domain="fritzing.fab">
  <head>
    <metal:block fill-slot="style_slot">
      <link rel="stylesheet" type="text/css" 
        tal:define="navroot context/@@plone_portal_state/navigation_root_url" 
        tal:attributes="href string:${navroot}/++resource++fritzing.fab/styles.css" />
    </metal:block>
    <metal:block fill-slot="javascript_head_slot">
      <script type="text/javascript" 
        tal:define="navroot context/@@plone_portal_state/navigation_root_url" 
        tal:attributes="src string:${navroot}/++resource++fritzing.fab/fab.js">
      </script>
    </metal:block>
  </head>
  <body>
    <metal:main fill-slot="main">
      <tal:main-macro metal:define-macro="main">
        <h1 tal:content="view/label" class="documentFirstHeading">xOrder your PCB</h1>
        <p tal:content="view/description" class="documentDescription">x</p>
        <div id="content-core" 
          tal:define="member python:context.portal_membership.getAuthenticatedMember(); 
                      isManager python:member.has_role('Manager');
                      isOwner python:member.has_role('Owner')">
          <table class="plain">
            <tbody>
              <tr>
                <td width="50%">
              
                  <div tal:condition="not:container/listFolderContents">
                    <h3>Preparations</h3>
                    <p>
                      Please read:<br />
                      <a href="http://fritzing.org/learning/tutorials/designing-pcb/">DESIGNING A PCB</a><br />
                      <a href="http://fritzing.org/learning/tutorials/fritzing-fab-howto/">FRITZING FAB HOWTO</a>
                    </p>
                    <h3>Send it in</h3>
                    <p>
                      <strong>Save your sketch as "shareable"</strong> then click <a class="addOrderLink" tal:attributes="href string:${context/absolute_url}/++add++faborder">Order your PCBs</a> to place your order. You will be asked to upload your sketches, fill in some information and pay with PayPal to complete your order.
                    </p>
                  </div>
                                
                  <div tal:condition="container/listFolderContents">
                    <h3>Your orders</h3>
                    <table>
                      <tr tal:condition="container/listFolderContents">
                        <th tal:condition="isManager">User</th>
                        <th tal:condition="isManager">Order ID</th>
                        <th>Sketches</th>
                        <th>Status</th>
                        <th>Actions</th>
                      </tr>
                      <tr tal:repeat="item container/listFolderContents">
                        <td tal:condition="isManager">
                          <p tal:content="item/userId | string:error"></p>
                        </td>
                        <td tal:condition="isManager" tal:content="item/id | string:error">title</td>
                        <td>
                          <span tal:condition="not:item/listFolderContents">no sketches</span>
                          <ul tal:condition="item/listFolderContents">
                            <li tal:repeat="sketch item/listFolderContents" 
                              tal:content="sketch/orderItem/filename | string:error">
                              filename
                            </li>
                          </ul>
                        </td>
                        <td>
                          <div tal:condition="not:item/isOrdered">not submitted</div>
                          <div tal:condition="item/isOrdered">
                            submitted, 
                            <div tal:condition="not:item/isPaid">payment not confirmed</div>
                            <div tal:condition="item/isPaid">payment confirmed</div>
                          </div>
                        </td>
                        <td>
                          <a class="viewOrderLink" 
                            tal:condition="not:python:isOwner or isManager" 
                            tal:attributes="href string:${item/absolute_url}">view</a>
                          <a class="viewOrderLink" 
                            tal:condition="python:isOwner or isManager" 
                            tal:attributes="href string:${item/absolute_url}">view/edit</a><br/>
                          <a class="deleteOrderLink" 
                            tal:condition="python:isOwner or isManager" 
                            tal:attributes="href string:${item/absolute_url}/delete_confirmation">delete</a>
                        </td>
                      </tr>
                    </table>
                    <a class="addOrderLink" 
                      tal:attributes="href string:${context/absolute_url}/++add++faborder">add order</a>
                  </div>
                  
                  <p><br /></p>
                  <p>
                    <strong>Good luck and happy routing!</strong>
                  </p>
                  <p><br /></p>
                  <p>
                    P.S. While you're here, please also take a look at our 
                    <a href="http://fritzing.org/shop/starter-kit/">Fritzing Starter Kit</a>. :)
                  </p>
                </td>
                <td width="50%">
                  <a class="addOrderLink" tal:attributes="href string:${context/absolute_url}/++add++faborder">Order your PCBs</a>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </tal:main-macro>
    </metal:main>
  </body>
</html>
