<html xmlns="http://www.w3.org/1999/xhtml" xmlns:tal="http://xml.zope.org/namespaces/tal" xmlns:metal="http://xml.zope.org/namespaces/metal" xmlns:i18n="http://xml.zope.org/namespaces/i18n" xml:lang="en" lang="en" metal:use-macro="context/main_template/macros/master" i18n:domain="fritzing.fab">
  <head>
      <metal:block fill-slot="style_slot">
          <link rel="stylesheet" type="text/css" 
              tal:define="navroot context/@@plone_portal_state/navigation_root_url"
              tal:attributes="href string:${navroot}/++resource++fritzing.fab/styles.css"
              />
      </metal:block>
      <metal:block fill-slot="javascript_head_slot">
          <script type="text/javascript" 
              tal:define="navroot context/@@plone_portal_state/navigation_root_url"
              tal:attributes="src string:${navroot}/++resource++fritzing.fab/fab.js"
              >
          </script>
      </metal:block>
  </head>
  <body>
    <metal:main fill-slot="main">
      <tal:main-macro metal:define-macro="main">
        <h1 tal:content="view/label" class="documentFirstHeading">xOrder your PCB</h1>
        <div id="content-core">
          
          
          <h2>Step 1: Upload your sketches</h2>
          
          <div tal:condition="not:container/listFolderContents">
            <p>no sketches, bla bla</p>
            <a class="addSketchLink" href="#" tal:attributes="href string:${context/absolute_url}/++add++sketch">Add Sketch</a>
          </div>
          
          <table tal:condition="container/listFolderContents">
            <tr tal:repeat="item container/listFolderContents">
              <td>
                filename: <span tal:content="item/orderItem/filename | string:error">filename</span><br />
                board dimensions: <span tal:content="python: '%.2f&nbsp;cm&nbsp;&times;&nbsp;%.2f&nbsp;cm' % (item.width, item.height)">size</span><br />
                area: <span tal:content="python: '%.2f&nbsp;cm&sup2;' % (item.area)">area</span>
              </td>
              <td>
                copies: <span tal:content="item/copies">-?-</span><br />
                check: <span tal:content="item/check">-?-</span>
              </td>
              <td>
                <a class="editSketchLink" href="#" tal:attributes="href string:${item/absolute_url}/edit">edit</a><br />
                <a class="deleteSketchLink" href="#" tal:attributes="href string:${item/absolute_url}/delete_confirmation">delete</a>
              </td>
            </tr>
            <tr>
              <td colspan="3"><a class="addSketchLink" href="#" tal:attributes="href string:${context/absolute_url}/++add++sketch">Add Sketch</a></td>
            </tr>
          </table>
          
          
          <div tal:condition="python: (context.area > 0)">

            <h2>Step 2: Provide shipping and contact information</h2>
          
            <div tal:condition="python: not context.shipTo">
              <p>
                please add your phone number, e-mail address and shipping destination to complete your order:<br />
                <a class="editAddressLink" href="#" tal:attributes="href string:${context/absolute_url}/edit">Add a phone number and shipping destination</a>
              </p>
            </div>
          
            <table tal:condition="python: context.shipTo">
              <tr>
                <td>E-Mail: </td>
                <td tal:content="context/email"></td>
              </tr>
              <tr>
                <td>Phone: </td>
                <td tal:content="context/telephone"></td>
              </tr>
              <tr>
                <td>Shipping Area: </td>
                <td tal:content="context/shipTo"></td>
              </tr>
              <tr>
                <td colspan="2"><a class="editAddressLink" href="#" tal:attributes="href string:${context/absolute_url}/edit">Edit</a></td>
              </tr>
            </table>
          </div>
          
          
          <div tal:condition="python: (context.area > 0 and context.shipTo and context.email)">
        
            <h2>Step 3: Review your order</h2>
        
            <table>
              <tr>
                <td tal:content="python: '%.2f&nbsp;cm&sup2;' % (context.area)"></td>
                <td>PCB Area (<span tal:content="context/pricePerSquareCm"></span>&nbsp;EUR/cm&sup2;)</td>
                <td tal:content="python: '%.2f&nbsp;EUR' % (context.priceNetto)"></td>
              </tr>
              <tr tal:condition="python: (context.numberOfQualityChecks > 0)">
                <td><span tal:content="context/numberOfQualityChecks"></span>&times;</td>
                <td>Sketch quality check</td>
                <td tal:content="python: '%.2f&nbsp;EUR' % (context.priceQualityChecksNetto)"></td>
              </tr>
              <tr>
                <td>1&times;</td>
                <td>Shipping</td>
                <td tal:content="python: '%.2f&nbsp;EUR' % (context.priceShippingNetto)"></td>
              </tr>
              <tr>
                <td></td>
                <td>Total Netto</td>
                <td tal:content="python: '%.2f&nbsp;EUR' % (context.priceTotalNetto)"></td>
              </tr>
              <tr>
                <td></td>
                <td>Taxes (<span tal:content="context/taxesPercent"></span>%)</td>
                <td tal:content="python: '%.2f&nbsp;EUR' % (context.taxes)"></td>
              </tr>
              <tr>
                <td></td>
                <td>Total</td>
                <td tal:content="python: '%.2f&nbsp;EUR' % (context.priceTotalBrutto)"></td>
              </tr>
            </table>
            
            
            <h2>Step 4: PayPal checkout</h2>
            
            <p>
              everything alright blabla... you can now: <br />
              <a class="checkoutLink" href="#" tal:attributes="href string:${context/absolute_url}/checkoutxx">Checkout</a>
            </p>
          </div>
        </div>
      </tal:main-macro>
    </metal:main>
  </body>
</html>
